import{d as C,u as w,a as F,b as D,c as g,w as E,o as f,e as v,f as I,v as R,g as u,h as a,F as N,r as A,t as $,i as L,j as B,k,l as S,m as V,n as x,p as M,q as O,s as P,x as U,y as j,z as q}from"./vendor.608a2753.js";const H=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function d(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerpolicy&&(t.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?t.credentials="include":n.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(n){if(n.ep)return;n.ep=!0;const t=d(n);fetch(n.href,t)}};H();const z=["value"],K=C({setup(o){const e=w(),d=F();D();let r=g(()=>e.getters.name),n=g({get(){return e.getters.site_name},set(s){e.commit("site_name_set",s)}}),t=function(){d.push("/search")};return E(r,()=>{n.value=r.value[0]}),(s,c)=>(f(),v("aside",null,[I(a("select",{"onUpdate:modelValue":c[0]||(c[0]=l=>L(n)?n.value=l:n=l)},[(f(!0),v(N,null,A(u(r),l=>(f(),v("option",{value:l,key:l},$(l),9,z))),128))],512),[[R,u(n)]]),a("button",{onClick:c[1]||(c[1]=(...l)=>u(t)&&u(t)(...l))},"\u8FD4\u56DE\u641C\u7D22\u9875")]))}});const T=a("header",null,null,-1),W={class:"main_down"},G=C({setup(o){const e=w(),d=k("$http"),r=k("backend_url");return async function(){let n=await d.get(r+"api/name");n.status===200&&e.commit("book_name_set",n.data)}(),g(()=>e.getters.name),(n,t)=>{const s=S("router-view");return f(),v(N,null,[T,a("div",W,[B(K),B(s,{class:"main"})])],64)}}}),J=V({state(){return{name:[],site_name:"",book:{index:NaN,author:"",title:""},content:[],page:NaN}},getters:{name(o){return o.name},site_name(o){return o.site_name},book(o){return o.book},content(o){return o.content},page(o){return isNaN(o.page)?"":o.content[o.page]}},mutations:{book_name_set(o,e){o.name=e},site_name_set(o,e){o.site_name=e},book_set(o,e){o.book.index=e.index,o.book.author=e.author,o.book.title=e.title},content_set(o,e){o.content=e},page_set(o,e){o.page=e}}});const Q={class:"search"},X={class:"search_head"},Y=a("option",{value:"title"},"\u6807\u9898",-1),Z=a("option",{value:"author"},"\u4F5C\u8005",-1),ee=[Y,Z],te={class:"search_res"},ne=["onClick"],se=C({setup(o){const e=w(),d=F(),r=D(),n=k("$http"),t=k("backend_url");let s=x("title"),c=x(""),l=x([]),m=g(()=>e.getters.site_name);E(m,()=>{r.params.site!==m.value&&d.push(`/search/${m.value}`)}),E(s,()=>{r.params.type!==s.value&&d.push(`/search/${m.value}/${s.value}`)}),E(c,()=>{r.params.key!==c.value&&d.push(`/search/${m.value}/${s.value}/${c.value}`)});let h=async function(){if(c.value===""){console.log('select_key = ""');return}let _=await n.post(t+"api/search",{site_name:m.value,type:s.value,key:c.value});_.status==200&&(l.value=_.data,d.push(`/search/${m.value}/${s.value}/${c.value}`))},y=async function(_){e.commit("book_set",{index:_.index,author:_.info.author,title:_.info.title}),d.push(`/content/${m.value}/${_.index}`)};return async function(){console.log(r.params),r.params.site!==""&&(r.params.site!==m.value&&e.commit("site_name_set",r.params.site),r.params.type!==""&&(s.value=r.params.type),r.params.key!==""&&(c.value=r.params.key),r.params.site!==""&&r.params.type!==""&&r.params.key!==""&&await h())}(),(_,p)=>(f(),v("div",Q,[a("div",X,[I(a("select",{"onUpdate:modelValue":p[0]||(p[0]=i=>L(s)?s.value=i:s=i)},ee,512),[[R,u(s)]]),I(a("input",{type:"text","onUpdate:modelValue":p[1]||(p[1]=i=>L(c)?c.value=i:c=i)},null,512),[[M,u(c)]]),a("button",{onClick:p[2]||(p[2]=(...i)=>u(h)&&u(h)(...i))},"\u641C\u7D22")]),a("div",te,[a("ul",null,[(f(!0),v(N,null,A(u(l),i=>(f(),v("li",{key:i.index},[a("a",{onClick:O(he=>u(y)(i),["prevent"])},$(i.info.title)+" "+$(i.info.author),9,ne)]))),128))])])]))}});const ae={class:"content"},oe={class:"top"},re={class:"down"},ue=["onClick"],ie=C({setup(o){const e=w(),d=k("$http"),r=k("backend_url"),n=F(),t=D();g(()=>e.getters.site_name),g(()=>e.getters.book);let s=x({index:NaN,info:{title:"\u6807\u9898",author:"\u4F5C\u8005"},content:[]});(async function(){let l=await d.post(r+"api/info",{site_name:t.params.site,param:t.params.index});l.status===200&&(s.value.index=l.data.index,s.value.info=l.data.info,s.value.content=l.data.content,e.commit("content_set",s.value.content))})();let c=function(l){e.commit("page_set",l),n.push(`/page/${t.params.site}/${t.params.index}/${l}`)};return(l,m)=>(f(),v("div",ae,[a("div",oe,[a("h1",null,$(u(s).info.title),1),a("h3",null,"\u4F5C\u8005: "+$(u(s).info.author),1)]),a("div",re,[a("ul",null,[(f(!0),v(N,null,A(u(s).content,(h,y)=>(f(),v("li",{key:h.url},[a("a",{onClick:_=>u(c)(y)},$(h.title),9,ue)]))),128))])])]))}});const le={class:"page"},ce={class:"top"},pe={class:"footer"},_e={class:"down"},de={class:"footer"},me=C({setup(o){const e=w(),d=k("$http"),r=k("backend_url"),n=F(),t=D();let s=x([]),c=x("");g(()=>e.getters.site_name),g(()=>e.getters.page),g(()=>e.getters.book);let l=async function(){let _=await d.post(r+"api/page",{site_name:t.params.site,param:e.getters.content[parseInt(t.params.url)].url});_.status===200&&(s.value=_.data.novel,c.value=_.data.title)},m=function(){parseInt(t.params.url)>0&&n.push(`/page/${t.params.site}/${t.params.index}/${parseInt(t.params.url)-1}`)},h=function(){parseInt(t.params.url)<e.getters.content.length-1&&n.push(`/page/${t.params.site}/${t.params.index}/${parseInt(t.params.url)+1}`)},y=function(){n.push(`/content/${t.params.site}/${t.params.index}`)};return async function(){if(e.getters.content.length===0){let _=await d.post(r+"api/info",{site_name:t.params.site,param:t.params.index});_.status===200&&e.commit("content_set",_.data.content)}await l()}(),E(()=>n.currentRoute.value,l),(_,p)=>(f(),v("div",le,[a("div",ce,[a("h1",null,$(u(c)),1)]),a("div",pe,[a("button",{onClick:p[0]||(p[0]=(...i)=>u(m)&&u(m)(...i))},"\u4E0A\u4E00\u7AE0"),a("button",{onClick:p[1]||(p[1]=(...i)=>u(y)&&u(y)(...i))},"\u8FD4\u56DE\u76EE\u5F55"),a("button",{onClick:p[2]||(p[2]=(...i)=>u(h)&&u(h)(...i))},"\u4E0B\u4E00\u7AE0")]),a("div",_e,[(f(!0),v(N,null,A(u(s),i=>(f(),v("p",null,$(i),1))),256))]),a("div",de,[a("button",{onClick:p[3]||(p[3]=(...i)=>u(m)&&u(m)(...i))},"\u4E0A\u4E00\u7AE0"),a("button",{onClick:p[4]||(p[4]=(...i)=>u(y)&&u(y)(...i))},"\u8FD4\u56DE\u76EE\u5F55"),a("button",{onClick:p[5]||(p[5]=(...i)=>u(h)&&u(h)(...i))},"\u4E0B\u4E00\u7AE0")])]))}}),fe=[{path:"/",redirect:"/search"},{path:"/search/:site?/:type?/:key?",component:se},{path:"/content/:site/:index",component:ie},{path:"/page/:site/:index/:url",component:me}],ve=P({history:U(),routes:fe});const b=j(G);b.use(ve);b.use(J);b.config.globalProperties.$http=q;b.provide("$http",b.config.globalProperties.$http);b.provide("backend_url","http://localhost:3000/");b.mount("#app");
